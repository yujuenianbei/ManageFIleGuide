# 后台订单

##逻辑

1. 收货地址

未发货前（orderState 2,3） 后台可以新增，切换订单的收货地址

新增----调用新增收货地址接口 regGoodsResInfo
切换----调用更新订单收货地址接口  updateOrderAddress

其余状态只能进行查看


2. 操作-取消订单

两种情况 未发货,已发货

未发货： 

取消订单后
将产品添加回库存中;
将订单状态修改为1;
修改订单产品表中产品的状态为0;

已发货：

取消订单后（取消订单）  
将订单状态改为10;  
修改订单产品表中产品的状态为0;  

等到产品已经返回后（已收产品）  
将产品添加回库存中;  
将订单状态修改为1;  
（此过程需要对比产品的二维码和库存的二维码是否一致 弹框录入 input数量和产品数量保持一致，通过后才能进行状态的修改）

3. 修改订单状态
（目前不支持货到付款）
默认订单状态为2  

#### 支付调用第三方支付接口返回值  
支付成功：  
状态修改为3  
填入支付时间

支付失败:  
若第三方接口返回用户已取消支付 则在30分钟后自动取消订单  
若返回报错信息 则状态不发生变化

#### 备货完成： 
填写快递单号
状态更改为4

#### 订单在途
查询快递接口若已出仓库本市  
修改状态为5  

#### 订单完成
查询快递接口
用户已接收:  
修改状态为6  

用户拒收:  
修改状态为7  
然后走取消订单的已发货流程 只是状态不改为10

所有的操作都要记录对应的时间
保存状态更改的类型和时间