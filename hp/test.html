<!doctype html>
<html lang="en-US">
<header>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
</header>

<body>
    <script>
        function ajax1() {
            var defer = $.Deferred();
            $.ajax({
                url: "http://localhost:3000/api/videoList",
            }).done(
                function (data) {
                    console.log(data);
                    defer.resolve(1);
                }
            ).fail(
                function () {
                    alert("出错啦！");
                }
            );;
            return defer.promise(); //就在这里调用
        }
        function ajax2(value) {
            var defer = $.Deferred();
            setTimeout(function (value) {
                $.ajax({
                    url: "http://localhost:3000/api/songList",
                }).done(
                    function (data) {
                        console.log(data);
                        defer.resolve(value + 1);
                    }
                ).fail(
                    function () {
                        alert("出错啦！");
                    }
                );
            }, 4000)
            return defer.promise(); //就在这里调用
        }
        function ajax3(value) {
            var defer = $.Deferred();
            $.ajax({
                url: "http://localhost:3000/api/videoList",
            }).done(
                function (data) {
                    console.log(data);
                    defer.resolve(value + 1);
                }
            ).fail(
                function () {
                    alert("出错啦！");
                }
            );;
            return defer.promise(); //就在这里调用
        }

        (function () {
            $.when(ajax1()).then(function (value) {
                return ajax2(value)
            }).then(function (value) {
                return ajax3(value)
            })
        })()    
    </script>
</body>

</html>